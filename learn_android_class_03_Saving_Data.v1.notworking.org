* Introduction
  + Based on http://www.tutorialspoint.com/android/android_shared_preferences.htm
* [[http://developer.android.com/training/index.html][Getting Started]]
  1. [X] Created an Android Project with Eclipse
     1. [X] File -> New -> Android Application Project
	1. [X] Application = My Shared Preferences
	2. [X] Project Name = MySharedPreferences
	3. [X] Package Name = com.example.myfirstapp
	4. [X] Minimum Required SDK = API 19: Android 4.4 (KitKat) 
	5. [X] Target SDK = API 19: Android 4.4 (KitKat) 
	6. [X] Compile With = API 19: Android 4.4 (KitKat) 
	7. [X] Theme = Holo Light with Dark Action Bar
	8. [X] Click "Next", "Next", "Next", "Finish"
  2. [X] (Optional) Inspect files
     | File                | Path                                                                                       |
     |---------------------+--------------------------------------------------------------------------------------------|
     | AndroidManifest.xml | file:~/workspace/MySharedPreferences/AndroidManifest.xml                                   |
     | activity_main.xml   | file:~/workspace/MySharedPreferences/res/layout/activity_main.xml                          |
     | strings.xml         | file:~/workspace/MySharedPreferences/res/values/strings.xml                                |
     | MainActivity.java   | [[file:~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java]] |
  3. [X] Run your application on a physical device or emulator
  4. [X] View Java file
     Original MainActivity.java generated by Eclipse with Android plugin
     #+BEGIN_SRC java :tangle /tmp/Activity-original.java :padline no
       package com.example.mysharedpreferences;
       
       import android.app.Activity;
       import android.app.ActionBar;
       import android.app.Fragment;
       import android.os.Bundle;
       import android.view.LayoutInflater;
       import android.view.Menu;
       import android.view.MenuItem;
       import android.view.View;
       import android.view.ViewGroup;
       import android.os.Build;
       
       public class MainActivity extends Activity {
       
               @Override
               protected void onCreate(Bundle savedInstanceState) {
                       super.onCreate(savedInstanceState);
                       setContentView(R.layout.activity_main);
       
                       if (savedInstanceState == null) {
                               getFragmentManager().beginTransaction()
                                               .add(R.id.container, new PlaceholderFragment()).commit();
                       }
               }
       
               @Override
               public boolean onCreateOptionsMenu(Menu menu) {
       
                       // Inflate the menu; this adds items to the action bar if it is present.
                       getMenuInflater().inflate(R.menu.main, menu);
                       return true;
               }
       
               @Override
               public boolean onOptionsItemSelected(MenuItem item) {
                       // Handle action bar item clicks here. The action bar will
                       // automatically handle clicks on the Home/Up button, so long
                       // as you specify a parent activity in AndroidManifest.xml.
                       int id = item.getItemId();
                       if (id == R.id.action_settings) {
                               return true;
                       }
                       return super.onOptionsItemSelected(item);
               }
       
               /**
                ,* A placeholder fragment containing a simple view.
                ,*/
               public static class PlaceholderFragment extends Fragment {
       
                       public PlaceholderFragment() {
                       }
       
                       @Override
                       public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                       Bundle savedInstanceState) {
                               View rootView = inflater.inflate(R.layout.fragment_main, container,
                                               false);
                               return rootView;
                       }
               }
       
       }
     #+END_SRC
     Modified file per http://www.tutorialspoint.com/android/android_shared_preferences.htm
     #+BEGIN_SRC java :tangle /tmp/Activity-modified.java :padline no
       package com.example.sharedpreferences;
       
       import com.example.sharedpreferences.*;
       
       import android.os.Bundle;
       import android.app.Activity;
       import android.content.Context;
       import android.content.SharedPreferences;
       import android.content.SharedPreferences.Editor;
       import android.view.Menu;
       import android.view.View;
       import android.widget.TextView;
       
       public class MainActivity extends Activity {
       
          TextView name ;
          TextView phone;
          TextView email;
          TextView street;
          TextView place;
          public static final String MyPREFERENCES = "MyPrefs" ;
          public static final String Name = "nameKey"; 
          public static final String Phone = "phoneKey"; 
          public static final String Email = "emailKey"; 
          public static final String Street = "streetKey"; 
          public static final String Place = "placeKey"; 
       
          SharedPreferences sharedpreferences;
       
          @Override
          protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.activity_main);
       
             name = (TextView) findViewById(R.id.editTextName);
             phone = (TextView) findViewById(R.id.editTextPhone);
             email = (TextView) findViewById(R.id.editTextStreet);
             street = (TextView) findViewById(R.id.editTextEmail);
             place = (TextView) findViewById(R.id.editTextCity);
       
             sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
       
             if (sharedpreferences.contains(Name))
             {
                name.setText(sharedpreferences.getString(Name, ""));
       
             }
             if (sharedpreferences.contains(Phone))
             {
                phone.setText(sharedpreferences.getString(Phone, ""));
       
             }
             if (sharedpreferences.contains(Email))
             {
                email.setText(sharedpreferences.getString(Email, ""));
       
             }
             if (sharedpreferences.contains(Street))
             {
                street.setText(sharedpreferences.getString(Street, ""));
       
             }
             if (sharedpreferences.contains(Place))
             {
                place.setText(sharedpreferences.getString(Place,""));
       
             }
       
          }
       
          public void run(View view){
             String n  = name.getText().toString();
             String ph  = phone.getText().toString();
             String e  = email.getText().toString();
             String s  = street.getText().toString();
             String p  = place.getText().toString();
             Editor editor = sharedpreferences.edit();
             editor.putString(Name, n);
             editor.putString(Phone, ph);
             editor.putString(Email, e);
             editor.putString(Street, s);
             editor.putString(Place, p);
       
             editor.commit(); 
       
          }
          @Override
          public boolean onCreateOptionsMenu(Menu menu) {
             // Inflate the menu; this adds items to the action bar if it is present.
             getMenuInflater().inflate(R.menu.main, menu);
             return true;
          }
       
       }
     #+END_SRC
  5. [X] Edit [[file:~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java][~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java]]
     Place after "public class MainActivity extends Activity {"
     #+BEGIN_SRC java
       TextView name;
       TextView phone;
       TextView email;
       TextView street;
       TextView place;
       public static final String MyPREFERENCES = "MyPrefs" ;
       public static final String Name = "nameKey"; 
       public static final String Phone = "phoneKey"; 
       public static final String Email = "emailKey"; 
       public static final String Street = "streetKey"; 
       public static final String Place = "placeKey";
     #+END_SRC
     1. [X] Run program
  6. [X] Edit [[file:~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java][~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java]]
     Place below "public static final String Place = "placeKey";"
     #+BEGIN_SRC java
       SharedPreferences sharedpreferences;
     #+END_SRC
     1. [X] Add import statement
     2. [X] Run program
  7. [X] [[http://developer.android.com/training/basics/firstapp/building-ui.html#Strings][Add String Resources]] to [[file:~/workspace/MySharedPreferences/res/values/strings.xml][strings.xml]]
     #+BEGIN_SRC xml
       <?xml version="1.0" encoding="utf-8"?>
       <resources>
          
         <string name="app_name">My Shared Preferences</string>
         <string name="action_settings">Settings</string>
         <string name="hello_world">Hello world!</string>
            
         <string name="name">Name</string>
         <string name="phone">Phone</string>
         <string name="email">Email</string>
         <string name="street">Street</string>
         <string name="country">City/State/Zip</string>
            
         <string name="save">Save Contact</string>
            
       </resources>
     #+END_SRC
  8. [X] Edit onCreate method in  [[file:~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java][~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java]]
     Place below "@Override
     protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);"

     #+BEGIN_SRC java
       name = (TextView) findViewById(R.id.editTextName);
       phone = (TextView) findViewById(R.id.editTextPhone);
       email = (TextView) findViewById(R.id.editTextStreet);
       street = (TextView) findViewById(R.id.editTextEmail);
       place = (TextView) findViewById(R.id.editTextCity);
       
       sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
       
       if (sharedpreferences.contains(Name))
           {
	       name.setText(sharedpreferences.getString(Name, ""));
               
           }
       if (sharedpreferences.contains(Phone))
           {
	       phone.setText(sharedpreferences.getString(Phone, ""));
               
           }
       if (sharedpreferences.contains(Email))
           {
	       email.setText(sharedpreferences.getString(Email, ""));
               
           }
       if (sharedpreferences.contains(Street))
           {
	       street.setText(sharedpreferences.getString(Street, ""));
               
           }
       if (sharedpreferences.contains(Place))
           {
	       place.setText(sharedpreferences.getString(Place,""));
               
           }
     #+END_SRC
     1. [X] Note that program can't be compiled because there are reference to elements defined in fragment_main.xml
  9. [X] Build a User Interface
     1. [X] Edit the layout in [[file:~/workspace/MySharedPreferences/res/layout/activity_main.xml][activity_main.xml]]
	#+BEGIN_SRC xml :tangle /tmp/activity_main.xml :padline no
          <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                      xmlns:tools="http://schemas.android.com/tools"
                      android:id="@+id/scrollView1"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      tools:context=".DisplayContact" >
          
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="370dp"
                android:paddingBottom="@dimen/activity_vertical_margin"
                android:paddingLeft="@dimen/activity_horizontal_margin"
                android:paddingRight="@dimen/activity_horizontal_margin"
                android:paddingTop="@dimen/activity_vertical_margin"
                >
              
              <EditText
                  android:id="@+id/editTextName"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignParentLeft="true"
                  android:layout_marginTop="5dp"
                  android:layout_marginLeft="82dp"
                  android:ems="10"
                  android:inputType="text" >
                
              </EditText>
              
              <EditText
                  android:id="@+id/editTextEmail"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignLeft="@+id/editTextStreet"
                  android:layout_below="@+id/editTextStreet"
                  android:layout_marginTop="22dp"
                  android:ems="10"
                  android:inputType="textEmailAddress" />
              
              <TextView
                  android:id="@+id/textView1"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignBottom="@+id/editTextName"
                  android:layout_alignParentLeft="true"
                  android:text="@string/name"
                  android:textAppearance="?android:attr/textAppearanceMedium" />
              
              <Button
                  android:id="@+id/button1"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignLeft="@+id/editTextCity"
                  android:layout_alignParentBottom="true"
                  android:layout_marginBottom="28dp"
                  android:onClick="run"
                  android:text="@string/save" />
              
              <TextView
                  android:id="@+id/textView2"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignBottom="@+id/editTextEmail"
                  android:layout_alignLeft="@+id/textView1"
                  android:text="@string/email"
                  android:textAppearance="?android:attr/textAppearanceMedium" />
              
              <TextView
                  android:id="@+id/textView5" 
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignBottom="@+id/editTextPhone"
                  android:layout_alignLeft="@+id/textView1"
                  android:text="@string/phone"
                  android:textAppearance="?android:attr/textAppearanceMedium" />
              
              <TextView
                  android:id="@+id/textView4"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_above="@+id/editTextEmail"
                  android:layout_alignLeft="@+id/textView5"
                  android:text="@string/street"
                  android:textAppearance="?android:attr/textAppearanceMedium" />
              
              <EditText
                  android:id="@+id/editTextCity"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignRight="@+id/editTextName"
                  android:layout_below="@+id/editTextEmail"
                  android:layout_marginTop="30dp"
                  android:ems="10"
                  android:inputType="text" />
              
              <TextView
                  android:id="@+id/textView3"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignBaseline="@+id/editTextCity"
                  android:layout_alignBottom="@+id/editTextCity"
                  android:layout_alignParentLeft="true"
                  android:layout_toLeftOf="@+id/editTextEmail"
                  android:text="@string/country"
                  android:textAppearance="?android:attr/textAppearanceMedium" />
              
              <EditText
                  android:id="@+id/editTextStreet"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignLeft="@+id/editTextName"
                  android:layout_below="@+id/editTextPhone"
                  android:ems="10"
                  android:inputType="text" >
                
                <requestFocus />
              </EditText>
              
              <EditText
                  android:id="@+id/editTextPhone"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignLeft="@+id/editTextStreet"
                  android:layout_below="@+id/editTextName"
                  android:ems="10"
                  android:inputType="phone|text" />
              
            </RelativeLayout>
          
          </ScrollView>
	#+END_SRC
  10. [ ] Figure out why program crashes!
      1. [ ] Test out moving 	if ...	getFragmentManager().beginTransaction() ... block upwards
	 Place just after 	setContentView(R.layout.activity_main);
	 1. [ ] Note that program crashes
      2. [ ] Test by commenting out BLOCK
	 1. [ ] Note that program runs
      3. [ ] Test by uncommenting 	name = (TextView) findViewById(R.id.editTextName); ... declations
	 1. [ ] Note that program runs, but crashes when save button is clicked
      4. [ ] Uncomment sharedpreferences = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);
	 1. [ ] Note that program runs
  11. [X] add run method in [[file:~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java][~/workspace/MySharedPreferences/src/com/example/mysharedpreferences/MainActivity.java]]
	Place after protected void onCreate(Bundle savedInstanceState) { ... } method
	#+BEGIN_SRC java
	  public void run(View view){
              String n  = name.getText().toString();
              String ph  = phone.getText().toString();
              String e  = email.getText().toString();
              String s  = street.getText().toString();
              String p  = place.getText().toString();
              Editor editor = sharedpreferences.edit();
              editor.putString(Name, n);
              editor.putString(Phone, ph);
              editor.putString(Email, e);
              editor.putString(Street, s);
              editor.putString(Place, p);
            
              editor.commit(); 
            
	  }
	#+END_SRC
